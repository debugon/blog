---
title: "TravisCIを利用するお話-導入編-"
date: 2017-06-14 11:32:17
categories:
  - Programming
  - TravisCI
tags:
  - TravisCI
  - YAML
---

3週間ぶりの投稿に見えますが、おそらく公開時にはもっと時間がたっていると思います。
というのも今までちょいちょい記事を書いていましたが、TravisCIに手を出してみて躓いてしまったので一旦記事にして整理しようと考えたからです。

## TravisCIとは
TravisCIとは継続的インテグレーション(CI)を行うためのツールで、CIツールのひとつとされています。
TravisCI以外にもいくつかのCIツールがあり、代表的なのは

1. Jenkins
2. CircleCI
3. wercker

etc...
無料、有償のCIツールが存在していますが、今回は比較的メジャーなTravisCIを選択することにしました。

### なぜ、TravisCI？？？
とてもふわっとした理由で選んだのでなんとも言えませんが、日本語の資料が多い印象を受けたからです。
JenkinsやCircleCIも日本語の資料が多く、CircleCIについてはRedPenでの検査環境を整えている方もいたので特に悩みました。
（Hexoでブログを書いておいて何をいまさらって感じもしますけれど・・・）
最終的には他のCIツールよりもとっつきやすそうということもあり、TravisCIにすることになりました。

## TravisCIの使い方
TravisCIにはGitHubのアカウントを用いてサインインすることになります。
というのも、TravisCIはGitHubと連携することでテスト環境を構築せずテストを行えるからです。
逆に言ってしまうとTravisCIを使う場合はGitHubでなければいけないことになるので、別のサイトを利用してる場合は諦めるしかありません。
また無料プランでは公開レポジトリのみで、プライベートレポジトリを検査対象にするには有料プランに入らなければいけません。
初めてサインインした際はアプリケーション連携をするかどうか問われますので、許可してくださいね。

### レポジトリの選択
検査対象となるレポジトリを選択するにはGitHubアカウントでサインイン後、画面右上から`[ユーザー名]->Accounts`と選択することで選択画面を開くことができます。
その後は図のように案内に沿ってレポジトリを選択すれば、完了となります。
<img src="..\..\..\img\travis_repo.png" />

### .travis.yml
TravisCIではYAML形式で書かれた`.travis.yml`というファイルをルートディレクトリに配置しなければいけません。
CIツールを使っているor使ったことのある方ならお分かりかと思いますが、このファイルがTravisCIにおける設定ファイルになります。
適当に作成後、TravisCIで使用する設定を書き込みます。
今回は検査するための最小構成を設定したいと思います。

```YAML:.travis.yml
lang: node_js
node_js:
  - "node"
```

HexoはNode.jsで書かれているので`lang:`でNode.jsを選択しています。
`node_js:`ではNode.jsのバージョンを指定できますが、`- "node"`とすることで最新の安定版を指定することができます。
以上で最小構成でTravisCIによるテストを実装することができます。

### テスト
TravisCIでテストするには先ほど作成した`.travis.yml`をTravisCIで指定したレポジトリの直下に配置、PushすることでTravisが`.travis.yml`を元に検査を開始します。
検査はTravisCI上で逐一確認できるようになっており、結果はGitHubに登録しているメールアドレスに結果が通知されるようになっています。
最小構成の実行結果ではありませんが、TravisCIが動作すると図のようになります。(失敗しているんですけどね・・・

<img src="..\..\..\img\redpen-test-run.png" />

## 最後に
今回はTravisCIを最小構成で実装～テストするまでを記しましたが、次回は`.travis.yml`について細かく取り上げられたらと考えております。
その後はRedPenを取り扱ってみたいと考えていますが、最近は他の校正ツールに乗り換えようかと思ってたりするので、まだ未定ということで。
<font color="White">最近はノートPCが置き引きに遭い、スマホが文鎮化してしまったりと久しぶりの浦島状態を味わいました・・・</font>

<!--
><div style="text-align: right;">
引用元：[name](https://)
</div>
<img src="..\..\..\img\" />
<font color="White"></font>
-->
